Type: Component
Name: fc
Provider:
  - 阿里云
Version: 0.1.50
Description: Basic components of Alibaba cloud functional computing
HomePage: https://github.com/devsapp/fc
Tags:
  - 函数计算
Category: 基础云产品
Commands:
  Build & Deploy:
    deploy: Deploy local resources online
    build: Build the dependencies.
    remove: The ability to delete resources
  Observability:
    metrics: Query function metrics information
    logs: Query the function log. You need to open SLS log service
  Invoke & Debug:
    local: Run your serverless application locally for quick development & testing
    invoke: Invoke/Trigger online functions
    proxied: Local invoke via proxied service.
    remote: Remote invoke via proxied service.
  Publish & Config:
    version: Service version operation
    alias: Service alias operation
    provision: provision reservation operation
    ondemand: Resource on-demand operation
    layer: Resource layer operation
  Others:
    nas: Manage nas, include upload,download and so on
    plan: Perceived resource change
    info: Query online resource details
    sync: Synchronize online resources to offline resources
    stress: Stress test for the serverless application
    fun2s: Convert the Yaml specification of Funcraft to Serverless Devs
    instance: Instance login and operation [beta]
    api: API call directly [beta]
Service:
  函数计算:
    Authorities:
      - 函数计算全部权限
Properties:
  definitions:
    roleStatement:
      type: object
      description: 自定义策略内容
      default: {}
      examples: []
      required:
        - name
        - statement
      additionalProperties: false
      properties:
        name:
          type: string
          minLength: 1
          title: 策略名称
          description: 策略名称
          default: ""
          examples:
            - myPolicy
        description:
          type: string
          title: 策略描述
          description: 策略描述
          default: ""
          examples:
            - custom policy
        statement:
          type: array
          title: 策略内容列表
          description: 策略内容列表
          default: []
          examples: []
          minItems: 1
          uniqueItems: true
          items:
            oneOf:
              - type: object
                title: 策略内容列表
                description: 策略内容列表
                default: {}
                examples: []
                required:
                  - Effect
                  - Action
                  - Resource
                additionalProperties: false
                properties:
                  Effect:
                    title: 策略生效
                    description: 策略生效，可选值有 'Allow' 和 'Deny'
                    default: Allow
                    enum:
                      - Allow
                      - Deny
                  Action:
                    type: array
                    title: 策略动作
                    description: 策略动作
                    default: []
                    minItems: 1
                    uniqueItems: true
                    items:
                      oneOf:
                        - type: string
                          minLength: 1
                          title: 策略动作
                          description: 策略动作
                          examples:
                            - log:ListProject
                  Resource:
                    type: array
                    title: 策略的目标资源
                    description: 策略的目标资源
                    default: []
                    examples: []
                    minItems: 1
                    uniqueItems: true
                    items:
                      oneOf:
                        - type: string
                          title: 策略的目标资源
                          description: 策略的目标资源
                          default: ""
                          examples:
                            - acs:log:*:*:project/*
                          pattern: "^acs:.*$"
    role:
      type: object
      description: 自定义策略列表创建角色
      default: {}
      required:
        - name
        - policies
      additionalProperties: false
      properties:
        name:
          type: string
          title: 角色名称
          minLength: 1
          default: ""
          examples:
            - roleName
        policies:
          type: array
          x-component: RolePolicy
          x-oneof: component
          title: 策略列表
          description:
            当使用了这个字段，需要本地配置的 ak 具有创建 policy 和 role 的权限，列表中的元素支持字符串和 policy
            结构体
          default: []
          examples: []
          minItems: 1
          uniqueItems: true
          items:
            oneOf:
              - type: string
                title: 阿里云系统内置策略
                minLength: 1
                default: ""
                examples:
                  - AliyunOSSFullAccess
                x-component: Input
              - title: 自定义策略
                "$ref": "#/definitions/roleStatement"
    logConfig:
      type: object
      default: {}
      examples: []
      required:
        - project
        - logstore
      additionalProperties: false
      properties:
        project:
          type: string
          minLength: 1
          title: 日志项目
          default: ""
          examples:
            - xx-project
        logstore:
          type: string
          minLength: 1
          title: 日志仓库
          default: ""
          examples:
            - xx-logstore
        logBeginRule:
          title: 日志分割规则
          x-tooltip: 开启日志分割后，将按照日期格式分割长日志内容，如包含多个`2021-11-11`内容的单条日志将被默认分割为多行，当前日期以及下一个日期前的所有内容将作为一条独立日志写入SLS
          default: None
          x-component: Switch
          enum:
            - DefaultRegex
            - None
          x-enum-label:
            - 启用
            - 禁用
        enableRequestMetrics:
          type: boolean
          title: 请求级别指标
          x-tooltip:
            开启该功能后，您可以查看该服务下所有函数的某次调用所消耗的时间及内存。您可以基于请求级别指标创建 Grafana 大盘，点击<a
            href='https://help.aliyun.com/document_detail/208005.html' target='_blank'>这里</a>查看更多详情。
          default: true
        enableInstanceMetrics:
          type: boolean
          title: 实例级别指标
          x-tooltip:
            开启后，您可以查看实例级别的 CPU 使用情况、内存使用情况、实例网络情况和实例内请求数等核心指标信息。点击<a href='https://help.aliyun.com/document_detail/262088.html'
            target='_blank'>这里</a>查看更多详情。
          default: false
          examples:
            - true
    vpcConfig:
      type: object
      required:
        - vpcId
        - securityGroupId
        - vswitchIds
      additionalProperties: false
      properties:
        vpcId:
          type: string
          minLength: 1
          title: 专有网络VPC
          x-tooltip:
            当前服务中的函数可以访问的 VPC。点击<a href='https://help.aliyun.com/document_detail/72959.html'
            target='_blank'>这里</a>查看更多详情。
          default: ""
        vswitchIds:
          type: array
          title: 交换机
          x-tooltip:
            函数计算可以访问的子网。函数服务会在您提供的交换机创建弹性网卡. 您的函数将通过弹性网卡访问您专有网络里面的资源。点击<a href='https://help.aliyun.com/document_detail/72959.html'
            target='_blank'>这里</a>查看更多详情
          default: []
          minItems: 1
          uniqueItems: true
          items:
            oneOf:
              - type: string
                minLength: 1
                examples:
                  - vsw-xxx1
                  - vsw-xxx2
        securityGroupId:
          type: string
          minLength: 1
          title: 安全组
          x-tooltip:
            此安全组是ENI所在的安全组，也就是函数计算所在的安全组，安全组限定了函数计算在VPC中的出入站规则。需要设置您的VPC所在安全组的入站规则为允许函数计算所在的安全组访问。否则，函数计算无法顺畅地访问您的VPC内资源。点击<a
            href='https://help.aliyun.com/document_detail/72959.html' target='_blank'>这里</a>查看更多详情。
          default: ""
    nasConfig:
      type: object
      required:
        - mountPoints
      additionalProperties: false
      properties:
        userId:
          type: integer
          title: 用户
          minimum: 1
          maximum: 65534
          description: 访问 NAS 中文件时所用的用户，等同于文件系统中的用户（UID）的概念。UserID 取值范围从 0 到 65534
          default: 10003
          examples:
            - 10003
        groupId:
          type: integer
          title: 用户组
          minimum: 1
          maximum: 65534
          description: 访问 NAS 中文件时所用的用户组，等同于文件系统中的用户组（GID）的概念。GroupID 取值范围从 0 到 65534
          default: 10003
          examples:
            - 10003
        mountPoints:
          type: array
          title: 挂载点
          description: NAS 的挂载点。
          default: []
          examples: []
          minItems: 1
          uniqueItems: true
          items:
            oneOf:
              - type: object
                title: NAS 挂载点
                default: {}
                examples: []
                required:
                  - serverAddr
                  - nasDir
                  - fcDir
                additionalProperties: false
                properties:
                  serverAddr:
                    type: string
                    minLength: 1
                    title: NAS 挂载点
                    default: ""
                    examples:
                      - xxx-xxx.cn-shenzhen.nas.aliyuncs.com
                  nasDir:
                    type: string
                    minLength: 1
                    title: 远端NAS中目录
                    description: 通用型 NAS 以 / 开头，极速型 NAS 必须以 /share 开头。
                    default: ""
                    examples:
                      - "/unit-deploy-service"
                  fcDir:
                    type: string
                    minLength: 1
                    title: 函数运行环境中本地目录
                    description: 必须为 /home/ 或者 /mnt/ 的子目录，例如 /home/app
                    examples:
                      - "/mnt/auto"
    roleArn:
      type: string
      pattern: "^acs:ram.*:role.*$"
      title: 角色名称
      description: 使用一个 RAM 角色的 ARN 为函数指定执行角色，事件源会使用该角色触发函数执行，请确保该角色有调用函数的权限
    sourceArn:
      type: string
      pattern: "^acs:.*$"
      title: 事件源的 ARN
      description: 触发器事件源的 ARN
    namePattern:
      title: 名称
      description: 只能包含字母、数字、下划线和中划线。不能以数字、中划线开头。长度在 1-128 之间。
      type: string
      pattern: "^[a-zA-Z0-9-_]{1,128}$"
  type: object
  required:
    - region
    - service
  additionalProperties: false
  properties:
    region:
      default: cn-hangzhou
      title: 地域
      enum:
        - cn-beijing
        - cn-hangzhou
        - cn-shanghai
        - cn-qingdao
        - cn-zhangjiakou
        - cn-huhehaote
        - cn-shenzhen
        - cn-chengdu
        - cn-hongkong
        - ap-southeast-1
        - ap-southeast-2
        - ap-southeast-3
        - ap-southeast-5
        - ap-northeast-1
        - eu-central-1
        - eu-west-1
        - us-west-1
        - us-east-1
        - ap-south-1
    service:
      title: 服务配置
      type: object
      required:
        - name
      properties:
        name:
          "$ref": "#/definitions/namePattern"
        description:
          title: 描述
          description: 服务的描述信息
          maxLength: 4096
          type: string
        internetAccess:
          title: 允许公网访问
          description: 配置服务中的函数是否可以访问互联网
          default: true
          type: boolean
        role:
          title: 服务角色
          x-oneof: component
          x-tooltip:
            当前服务和服务中的函数将会使用这个 RAM 角色（Role）来访问您的阿里云资源。点击<a href='https://help.aliyun.com/document_detail/52885.html'
            target='_blank'>这里</a>查看更多详情。
          description:
            注意：在 RAM 控制台创建服务所使用的角色时，需要选择“阿里云服务”，并且“受信服务”为“函数计算”。详情参考<a href='https://ram.console.aliyun.com/roles/AliyunFCDefaultRole'
            target='_blank'>默认角色</a>
          pattern: "^acs:ram.*:role.*$"
          oneOf:
            - type: string
              title: 简单配置
              description:
                当前服务和服务中的函数将会使用这个 RAM 角色（Role）来访问您的阿里云资源。点击<a href='https://help.aliyun.com/document_detail/52885.html'
                target='_blank'>这里</a>查看更多详情。
              pattern: "^acs:ram.*:role.*$"
              x-component: Input
              examples:
                - acs:ram::xxx:role/fc-default-role
            - "$ref": "#/definitions/role"
              title: 高级配置
        tracingConfig:
          title: 链路追踪功能
          x-tooltip:
            启用链路追踪功能后，您可以使用 Jaeger上传链路信息，使您能够跟踪函数的执行，帮助您快速分析和诊断 Serverless
            架构下的性能瓶颈。点击<a href='https://help.aliyun.com/document_detail/189804.html'
            target='_blank'>这里</a>查看更多详情。                注意：函数计算在后台为您创建的链路追踪资源可能会产生费用（有一定的免费额度），详情请参见<a
            href='https://help.aliyun.com/document_detail/169781.html' target='_blank'>链路追踪计费方式。</a>
          description:
            配置服务的链路追踪功能，启用链路追踪功能后，您可以使用 Jaeger 上传链路信息，使您能够跟踪函数的执行，帮助您快速分析和诊断
            Serverless 架构下的性能瓶颈。
          x-component: Switch
          enum:
            - Enable
            - Disable
          x-enum-label:
            - 启用
            - 禁用
        logConfig:
          title: 日志配置
          x-oneof: void
          x-tooltip: 配置服务的日志功能，启用日志功能后，您可以查看函数的执行日志，从而方便您的代码调试、故障分析、数据分析等操作。
          oneOf:
            - title: 自动配置
              x-tooltip:
                启用日志功能后，您可以查看函数的执行日志，从而方便您的代码调试、故障分析、数据分析等操作。点击<a href='https://help.aliyun.com/document_detail/73349.html'
                target='_blank'>这里</a>查看更多详情。注意：函数计算在后台为您创建的日志服务资源会产生费用，详情请参见<a href='https://help.aliyun.com/document_detail/107745.htm'
                target='_blank'>日志服务计费方式</a>。
              enum:
                - auto
            - title: 自定义配置
              "$ref": "#/definitions/logConfig"
        vpcConfig:
          title: VPC网络配置
          x-oneof: void
          x-tooltip: 配置服务中函数使用的网络，例如配置函数是否可以访问公网，是否可以访问 VPC 中的资源等。
          oneOf:
            - title: 自动配置
              x-tooltip: 选择自动配置，系统将会自动为您创建一个VPC、Switch、安全组
              enum:
                - auto
            - title: 自定义配置
              "$ref": "#/definitions/vpcConfig"
        nasConfig:
          title: 存储配置
          x-oneof: void
          x-tooltip: 配置服务中函数使用的 NAS 文件系统。配置后您的函数可以像访问本地文件系统一样访问存储在其中一个NAS文件系统上的文件。
          oneOf:
            - title: 自动配置
              description:
                1、选择自动配置 NAS，需要绑定 VPC、VSwitch 和安全组，如您未绑定，将会为您自动创建并绑定在当前服务中<br/>                    2、将为您创建一个新的通用型NAS文件系统，费用为容量型
                0.35 元/GB/月，性能型（部分地区无容量型） 1.85元/GB/月，请您及时关注 NAS 费用账单<br/>                    3、若您自动配置
                NAS 成功后选择禁用再启用，系统将优先匹配上一次 NAS 配置，如有需要可以手动更改配置
              enum:
                - auto
            - "$ref": "#/definitions/nasConfig"
              description:
                如果您已经为当前函数配置过VPC交换机且和NAS文件系统的可用区不一致，可在NAS中创建一个新的挂载点指向函数计算绑定的交换机。由于同一VPC内不同交换机之间内网互通，因此函数计算可以通过该交换机访问在其他可用区的VPC内资源，但可能会多
                1～2ms 左右的延时。
              title: 自定义配置
    function:
      type: object
      title: 函数配置
      additionalProperties: false
      oneOf:
        - required:
            - name
            - codeUri
            - runtime
        - required:
            - name
            - ossBucket
            - ossKey
            - runtime
      properties:
        name:
          "$ref": "#/definitions/namePattern"
        description:
          title: 描述
          examples:
            - this is test description
          type: string
        codeUri:
          title: 代码路径
          description: 本地代码包路径
          minLength: 1
          type: string
          examples:
            - "/home/admin"
          x-reactions:
            dependencies:
              - ".ossBucket"
              - ".ossKey"
            fulfill:
              state:
                visible: "{{!$deps[0]&&!$deps[1]}}"
        ossBucket:
          title: ossBucket
          description: 如果指定oss代码，所在的存储桶，不能与codeUri同时出现
          type: string
          minLength: 1
          x-reactions:
            dependencies:
              - ".codeUri"
            fulfill:
              state:
                visible: "{{!$deps[0]}}"
        ossKey:
          title: ossKey
          description: 如果指定oss代码，所对应的对象，不能与codeUri同时出现
          type: string
          minLength: 1
          x-reactions:
            dependencies:
              - ".codeUri"
            fulfill:
              state:
                visible: "{{!$deps[0]}}"
        handler:
          title: 函数入口
          x-tooltip: 指定调用函数时需要从哪个文件中的哪个函数开始执行。
          description:
            在“运行环境”为 Node.js 时，当前值的格式为 [文件名].[函数名]。如果当前值为 index.handler，那么在函数被触发时，将执行
            index.js 文件中的 handler 函数。
          examples:
            - index.handler
          type: string
        runtime:
          title: 运行环境
          default: nodejs12
          type: string
          enum:
            - nodejs14
            - nodejs12
            - nodejs10
            - nodejs8
            - python3
            - python3.9
            - java8
            - java11
            - php7.2
            - dotnetcore2.1
            - custom
            - custom-container
            - nodejs4.4
            - nodejs6
            - python2.7
        customRuntimeConfig:
          x-reactions:
            dependencies:
              - ".runtime"
            fulfill:
              state:
                visible: "{{$deps[0] === 'custom'}}"
          title: custom配置
          type: object
          required:
            - command
          additionalProperties: false
          properties:
            command:
              type: array
              title: 启动指令
              description: 自定义bootstrap启动命令和参数列表。需填写绝对路径，如：/code/myBootstrap
              default: []
              examples: []
              minItems: 1
              uniqueItems: true
              items:
                oneOf:
                  - type: string
                    minLength: 1
            args:
              type: array
              title: 启动参数
              description: 自定义bootstrap接收的参数列表。依次追加到启动命令之后
              items:
                oneOf:
                  - type: string
        customContainerConfig:
          x-reactions:
            dependencies:
              - ".runtime"
            fulfill:
              state:
                visible: "{{$deps[0] === 'custom-container'}}"
          title: 自定义镜像配置
          type: object
          required:
            - image
          properties:
            image:
              title: 容器镜像地址
              description:
                您需要在容器中实现一个 HTTP Server。当调用函数时，函数计算会启动您的容器，并通过容器中的 HTTP Server
                对外提供服务。注意：镜像资源使用量中的执行时间是从仓库拉取镜像开始计算的，容器镜像在一段时间一定范围内有缓存，因此并不是每次冷启动一定会产生镜像拉取的费用。这里查看更多详情。
              type: string
              minLength: 1
            instanceID:
              title: 企业镜像ID
              description: 容器镜像服务企业版实例的ID。当容器镜像选择的是企业版实例时，您需要给容器镜像服务企业版添加实例ID，该实例的默认解析必须是服务所在的VPC网络地址。目前不支持PrivateZone产品定义域名解析
              type: string
            command:
              examples:
                - '["/code/myserver"]'
              title: Command
              description: 容器的启动命令，例如["/code/myserver"]。该参数为可选参数，如果不填写，则默认使用镜像中的Entrypoint/CMD。
              type: string
            args:
              title: Args
              description: 容器的启动参数，例如["-arg1", "value1"]。该参数为可选参数，如果不填写，则默认使用镜像中的CMD。
              examples:
                - '["-arg1", "value1"]'
              type: string
            accelerationType:
              title: 拉取镜像加速
              description: 开启函数计算的镜像加速后，可提速 2~5 倍，将分钟级的镜像拉取缩短至秒级。开启镜像加速将会将镜像转存在函数计算的安全镜像加速存储中。
              default: Default
              type: string
              x-component: Switch
              enum:
                - Default
                - None
              x-enum-label:
                - 启用
                - 禁用
        instanceType:
          title: 实例类型
          type: string
          enum:
            - e1
            - c1
            - g1
          x-enum-label:
            - 弹性实例
            - 性能实例
            - GPU实例
          x-tooltip: 函数计算提供性能实例和弹性实例两种实例类型。<br/>                弹性实例：函数计算基本实例，规格小于性能实例，不能执行时间较长的离线任务或平滑地将大应用迁移至函数计算。<br/>                性能实例：大规格实例，包含多种实例规格，资源上限更高，适配场景更多。<br/>
          description:
            点击<a href='https://help.aliyun.com/document_detail/179379.html'
            target='_blank'>这里</a>查看实例类型详情，使用限制和使用场景。
        memorySize:
          title: 内存规格
          description: 函数执行内存。当执行函数时，可使用的最大内存。
          default: 512
          type: integer
          enum:
            - 128
            - 256
            - 512
            - 1024
            - 2048
            - 3072
            - 4096
            - 8192
            - 16384
            - 32768
          x-reactions: "{{memorySize}}"
        gpuMemorySize:
          title: GPU内存规格
          description: 函数执行内存。当执行函数时，可使用的最大内存。
          default: 8192
          type: integer
          enum:
            - 8192
            - 16384
          x-enum-label:
            - 8GB
            - 16GB
          x-reactions:
            dependencies:
              - ".instanceType"
            fulfill:
              state:
                visible: "{{$deps[0] === 'g1'}}"
        timeout:
          title: 执行超时时间
          description: 如果函数在这个时间内未能成功执行，函数计算会返回超时错误，请设置大小合适的超时时间，避免函数执行超时。
          default: 60
          type: integer
        instanceConcurrency:
          title: 单实例并发数
          description:
            函数计算支持单实例多并发的功能，这个值用来配置单个函数实例可以同时处理多少个请求。点击这里<a href='https://help.aliyun.com/document_detail/144586.html'
            target='_blank'>查看</a>更多详情。
          type: integer
        caPort:
          title: 监听端口
          description: 您的 HTTP Server 所监听的端口。
          type: integer
        environmentVariables:
          title: 环境变量
          description: 配置函数运行环境中的环境变量。
          x-component: KeyValue
        layers:
          type: array
          title: 层
          description: 层可以为您提供自定义的公共依赖库、运行时环境及函数扩展等发布与部署能力。
          uniqueItems: true
          items:
            oneOf:
              - type: string
        initializer:
          title: 初始化函数
          description:
            函数计算平台会根据请求动态分配实例执行函数，当函数有连续调用时，会复用同一实例。Initializer 是初始化函数，保证在同一实例中执行且成功执行一次。                    在“运行环境”为
            Node.js 时，当前值的格式为 [文件名].[函数名]。如果当前值为 index.initializer，那么在函数被触发时，将执行 index.js
            文件中的 initializer 函数。
          examples:
            - index.initializer
          type: string
          x-departed: true
        initializationTimeout:
          title: 初始化函数超时时间
          description: 执行初始化函数的超时时间
          type: integer
          x-departed: true
        instanceLifecycleConfig:
          title: 扩展函数
          type: object
          additionalProperties: false
          properties:
            initializer:
              title: 初始化函数
              type: object
              required:
                - handler
              additionalProperties: false
              properties:
                handler:
                  title: 函数入口
                  x-tooltip: 函数计算平台会根据请求动态分配实例执行函数，当函数有连续调用时，会复用同一实例。Initializer 是初始化函数，保证在同一实例中执行且成功执行一次。在“运行环境”为 Node.js 时，当前值的格式为 [文件名].[函数名]。如果当前值为 index.init，那么在函数被触发时，将执行 index.js 文件中的 init 函数。
                  type: string
                  minLength: 1
                timeout:
                  title: 超时时间
                  x-tooltip: 执行 Initializer 函数的超时时间
                  type: integer
            preFreeze:
              title: PreFreeze 函数
              type: object
              required:
                - handler
              additionalProperties: false
              properties:
                handler:
                  title: 函数入口
                  x-tooltip:
                    在每次函数计算服务决定冷冻当前函数实例前，您希望函数计算调用的函数。PreFreeze 函数输入参数没有 event
                    参数。PreFreeze 函数无返回值，在函数末尾增加返回逻辑是无效的。Python、PHP 及 C# Runtime 不支持配置
                    PreFreeze 函数。   在“运行环境”为 Node.js
                    时，当前值的格式为 [文件名].[函数名]。如果当前值为 index.handler，那么在函数被触发时，将执行 index.js
                    文件中的 handler 函数。
                  type: string
                  minLength: 1
                timeout:
                  title: 超时时间
                  x-tooltip: 执行PreFreeze 函数的超时时间
                  type: integer
            preStop:
              type: object
              required:
                - handler
              title: PreStop 函数
              additionalProperties: false
              properties:
                handler:
                  title: 函数入口
                  x-tooltip:
                    在每次函数计算决定停止当前函数实例前，您希望函数计算调用的函数。PreStop 函数输入参数没有event参数。PreStop
                    函数无返回值，在函数末尾增加返回逻辑是无效的。所有 Runtime 均支持配置 PreStop 函数。点击<a href='https://help.aliyun.com/document_detail/191143.html'
                    target='_blank'>这里</a>查看更多详情。<br/>                            在“运行环境”为
                    Node.js 时，当前值的格式为 [文件名].[函数名]。如果当前值为 index.handler，那么在函数被触发时，将执行
                    index.js 文件中的 handler 函数。
                  type: string
                  minLength: 1
                timeout:
                  title: 超时时间
                  x-tooltip: 执行PreStop 函数的超时时间
                  type: integer
        customDNS:
          title: DNS 配置
          type: object
          description: 用户自定义的 DNS 配置，平台根据该配置生成/etc/resolv.conf。仅对官方提供的 Runtime 生效。
          additionalProperties: false
          properties:
            nameServers:
              type: array
              title: Name Servers
              description: 请输入合法的 IP，例如：8.8.8.8
              uniqueItems: true
              items:
                oneOf:
                  - x-validator:
                      - ipv4
                    type: string
            searches:
              type: array
              title: 搜索域
              description: DNS 搜索域列表
              uniqueItems: true
              items:
                oneOf:
                  - type: string
            dnsOptions:
              type: array
              title: DNS 选项
              x-component: KeyValue
              x-component-props:
                type: array
              description: 对应 resolv.conf DNS 配置的 Options 项，列表中每一项的键是必填的
              uniqueItems: true
              items:
                oneOf:
                  - type: object
                    required:
                      - name
                      - value
                    properties:
                      name:
                        title: 键
                        type: string
                        minLength: 1
                      value:
                        title: 值
                        type: string
                        minLength: 1
        asyncConfiguration:
          title: 异步配置
          type: object
          additionalProperties: false
          properties:
            destination:
              type: object
              additionalProperties: false
              properties:
                onSuccess:
                  title: 成功目标
                  examples:
                    - acs:fc:{region}:{uid}:services/{serviceName}.{qualifier}/functions/{functionName}
                  type: string
                  x-tooltip: 在使用异步调用时，您可以在函数执行成功或执行失败后将执行信息发送给其他目标服务。
                onFailure:
                  title: 失败目标
                  examples:
                    - acs:fc:{region}:{uid}:services/{serviceName}.{qualifier}/functions/{functionName}
                  type: string
                  x-tooltip: 在使用异步调用时，您可以在函数执行成功或执行失败后将执行信息发送给其他目标服务。
            maxAsyncEventAgeInSeconds:
              title: 消息最大有效期(s)
              type: integer
              minimum: 1
              maximum: 2592000
            maxAsyncRetryAttempts:
              title: 最大重试次数
              type: integer
              minimum: 0
              maximum: 8
              x-tooltip:
                在异步调用失败时，函数计算在<a href='_blank' target='https://help.aliyun.com/document_detail/52878.html'>某些情况</a>下会自动重试，您可以根据业务需求减少或增加对异步调用的重试。点击<a
                href='_blank' target='https://help.aliyun.com/document_detail/52878.html'>这里</a>查看更多详情。
            statefulInvocation:
              title: 异步调用状态
              type: boolean
              x-tooltip:
                有状态异步调用可以提供更好的可观测性。支持查询调用的状态，排队情况，执行情况，执行结果等。同时也提供调用级的控制能力。比如可以主动终止调用。有状态的异步调用适用于函数执行时间较长的场景的调用。点击<a
                href='_blank' target='https://help.aliyun.com/document_detail/52878.html'>这里</a>查看更多详情。<br><br>                    无状态异步调用支持的功能较少，但通常可以满足一般的业务场景。点击<a
                href='_blank' target='https://help.aliyun.com/document_detail/52878.html'>这里</a>查看更多详情。
    triggers:
      title: 触发器配置
      type: array
      uniqueItems: true
      items:
        oneOf:
          - type: object
            required:
              - type
              - name
              - config
            properties:
              type:
                title: 触发器类型
                default: http
                description: HTTP 函数只能创建 HTTP 类型的触发器。
                enum:
                  - http
                  - timer
                  - oss
                  - log
                  - mns_topic
                  - cdn_events
                  - tablestore
                x-enum-label:
                  - HTTP触发器
                  - 定时触发器
                  - OSS触发器
                  - 日志触发器
                  - MNS触发器
                  - CDN触发器
                  - Tablestore触发器
              name:
                "$ref": "#/definitions/namePattern"
              config:
                type: object
                oneOf:
                  - required:
                      - authType
                      - methods
                  - required:
                      - cronExpression
                      - enable
                  - required:
                      - bucketName
                      - events
                      - filter
                  - required:
                      - logConfig
                      - jobConfig
                      - sourceConfig
                      - enable
                  - required:
                      - topicName
                  - required:
                      - eventName
                      - eventVersion
                      - filter
                      - notes
                  - required:
                      - instanceName
                      - tableName
                properties:
                  authType:
                    title: 鉴权类型
                    default: anonymous
                    enum:
                      - anonymous
                      - function
                    x-enum-label:
                      - 无需身份验证，支持匿名访问
                      - 需要通过身份验证，不支持匿名访问
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'http'}}"
                  methods:
                    type: array
                    x-type: array-select
                    title: 请求方法
                    default:
                      - GET
                      - POST
                    items:
                      oneOf:
                        - type: string
                          title: 请求方法
                          default:
                            - GET
                            - POST
                          examples:
                            - GET
                            - POST
                          enum:
                            - GET
                            - POST
                            - PUT
                            - DELETE
                            - HEAD
                            - OPTIONS
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'http'}}"
                  logConfig:
                    title: log配置
                    type: object
                    required:
                      - project
                      - logstore
                    properties:
                      project:
                        title: 日志项目
                        description: 表示日志服务 Project 名称
                        type: string
                        minLength: 1
                      logstore:
                        title: 日志仓库
                        description: 当前触发器会定时从此 logstore 中订阅数据，然后触发函数。
                        type: string
                        minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'log'}}"
                  jobConfig:
                    title: job配置
                    type: object
                    properties:
                      maxRetryTime:
                        title: 重试次数
                        description: 取值范围为 0～100。日志服务根据触发间隔每次触发函数执行时，如果遇到错误（例如权限不足、网络失败、函数执行异常返回等），该参数定义本次触发所允许的最大重试次数。对于本次触发，如果超过最大重试次数仍无法成功的。需要等到下一次触发间隔到来时，由日志服务再次触发函数执行。
                        type: integer
                      triggerInterval:
                        title: 触发间隔
                        description: 日志服务触发函数运行的间隔，比如每隔 120 秒将 logstore 在最近 120 秒内的数据取出到函数服务，以执行自定义计算。
                        type: integer
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'log'}}"
                  sourceConfig:
                    title: source配置
                    type: object
                    required:
                      - logstore
                    properties:
                      logstore:
                        description: 数据源的 Logstore 名称。触发器会定时从该 Logstore 订阅数据到函数计算
                        type: string
                        minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'log'}}"
                  functionParameter:
                    title: 参数配置
                    description: 日志服务将该配置内容作为函数 event, 当事件触发时
                    x-component: KeyValue
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'log'}}"
                  cronExpression:
                    title: cron表达式
                    description:
                      默认 Cron 以 UTC 时间运行，即北京时间减去 8 个小时。例如如果您想要在北京时间每天 12:00
                      调度函数，那么转化为 UTC 时间就是每天 4:00 调度函数，即 0 0 4 * * *。                                如果您的任务需要按照特定时区运行，可以通过CRON_TZ指定时区，例如在北京时间每个月一号的凌晨四点触发函数执行，则可以使用CRON_TZ=Asia/Shanghai
                      0 0 4 1 * *。
                    examples:
                      - 0 0 8 * * *
                    type: string
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'timer'}}"
                  enable:
                    title: 是否启用
                    type: boolean
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'timer'}}"
                  payload:
                    title: 触发消息
                    description: 输入自定义的参数。该触发消息将会作为 event 中 payload 的值。
                    type: string
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'timer'}}"
                  bucketName:
                    title: Bucket 名称
                    default: ""
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'oss'}}"
                  events:
                    title: 触发事件
                    description: 当 OSS 中发生指定的事件时触发当前触发器
                    type: array
                    minItems: 1
                    uniqueItems: true
                    items:
                      oneOf:
                        - type: string
                          minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'oss'}}"
                  filter:
                    type: object
                    required:
                      - domain
                    properties:
                      domain:
                        title: 域名
                        description: 您在 CDN 控制台添加域名时设置的加速域名。
                        type: array
                        minItems: 1
                        uniqueItems: true
                        items:
                          oneOf:
                            - type: string
                              minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'cdn_events'}}"
                  region:
                    title: MNS 地域
                    description: MNS 中 Topic 所在的地域。强烈建议 MNS Topic 和 函数计算的函数在相同的地域，不同的地域会增加网络延时风险。
                    type: string
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'mns_topic'}}"
                  topicName:
                    title: topic的名字
                    description: mns topic的名字
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'mns_topic'}}"
                  filterTag:
                    title: 过滤标签
                    description: 描述了该订阅中消息过滤的标签（标签一致的消息才会被推送）,不超过 16 个字符的字符串，默认不进行消息过滤，即默认不填写该字段
                    type: string
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'mns_topic'}}"
                  notifyContentFormat:
                    title: Event 格式
                    description: 推送给函数入参 event 的格式，可选值：STREAM, JSON
                    type: string
                    enum:
                      - STREAM
                      - JSON
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'mns_topic'}}"
                  notifyStrategy:
                    title: 重试策略
                    description:
                      退避重试：重试3次，每次重试的间隔时间是10秒到20秒之间的随机值。                                指数衰减重试：重试176次，每次重试的间隔时间指数递增至512秒，总计重试时间为1天。每次重试的具体间隔为：1，2，4，8，16，32，64，128，256，512，512...512
                      （共167个512）。
                    type: string
                    enum:
                      - BACKOFF_RETRY
                      - EXPONENTIAL_DECAY_RETRY
                    x-enum-label:
                      - 退避重试
                      - 指数衰减重试
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'mns_topic'}}"
                  eventName:
                    title: 触发事件
                    description: 为 CDN 端触发函数执行的事件，一经创建不能更改
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'cdn_events'}}"
                  eventVersion:
                    title: 触发事件版本
                    description: 触发事件的版本号。目前仅支持1.0.0事件版本。
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'cdn_events'}}"
                  notes:
                    title: 备注信息
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'cdn_events'}}"
                  instanceName:
                    title: 实例名
                    description: 请选择表格存储中的实例。表格存储触发器可以在表格存储中的数据更新时自动触发函数执行。
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'tablestore'}}"
                  tableName:
                    title: 表名
                    description: 请选择表格存储中的表名称。表格存储触发器可以在表格存储中的数据更新时自动触发函数执行。
                    type: string
                    minLength: 1
                    x-reactions:
                      dependencies:
                        - "..type"
                      fulfill:
                        state:
                          visible: "{{$deps[0] === 'tablestore'}}"
              role:
                "$ref": "#/definitions/roleArn"
                x-reactions:
                  dependencies:
                    - ".type"
                  fulfill:
                    state:
                      visible:
                        "{{$deps[0] === 'oss'|| $deps[0] === 'log'|| $deps[0] ===
                        'mns_topic'|| $deps[0] === 'cdn_events'|| $deps[0] === 'tablestore'}}"
              sourceArn:
                "$ref": "#/definitions/sourceArn"
                x-reactions:
                  dependencies:
                    - ".type"
                  fulfill:
                    state:
                      visible:
                        "{{$deps[0] === 'oss'|| $deps[0] === 'log'|| $deps[0] ===
                        'mns_topic'|| $deps[0] === 'cdn_events'|| $deps[0] === 'tablestore'}}"
    customDomains:
      title: 域名配置
      description:
        当您的函数使用 HTTP 请求触发时，您可能需要使用您自己的自定义域名来访问您的函数。例如，您创建了一个函数作为 Web 应用，您希望用户通过固定的域名访问这个
        Web 应用，这时候您就可以为该 Web 应用绑定自定义域名。除此之外，您还可以为该域名设置 CDN 加速功能，将部署在函数计算的应用作为源站，把源内容发布到边缘节点，使终端用户能快速读取所需内容。
      type: array
      items:
        oneOf:
          - type: object
            required:
              - domainName
              - protocol
              - routeConfigs
            properties:
              domainName:
                title: 域名
                description: 域名，可以选择auto，用来分配默认域名
                default: auto
              protocol:
                title: 协议
                type: string
                enum:
                  - HTTP
                  - HTTP,HTTPS
              routeConfigs:
                title: 路由配置
                type: array
                minItems: 1
                uniqueItems: true
                items:
                  oneOf:
                    - type: object
                      required:
                        - path
                      properties:
                        path:
                          title: 路径
                          type: string
                          minLength: 1
                        serviceName:
                          title: 服务名
                          type: string
                        functionName:
                          title: 函数名
                          type: string
                        qualifier:
                          title: 版本或别名
                          type: string
              certId:
                title: 获取证书内容
                type: integer
              tlsConfig:
                title: TLS 协议
                type: object
                required:
                  - minVersion
                  - cipherSuites
                properties:
                  minVersion:
                    type: string
                    title: TLS 协议版本
                    x-tooltip:
                      配置 TLS 协议版本。如果不配置，则使用默认 TLS 配置。点击<a href='https://help.aliyun.com/document_detail/90763.html'
                      target='_blank'>这里</a>查看更多详情。
                    enum:
                      - TLSv1.0
                      - TLSv1.1
                      - TLSv1.2
                    x-enum-label:
                      - 支持 TLS1.0 及以上版本，兼容性最高，安全性较低
                      - 支持 TLS1.1 及以上版本，兼容性较好，安全性较好
                      - 支持 TLS1.2 及以上版本，兼容性较好，安全性最高
                  cipherSuites:
                    type: array
                    title: 加密套件
                    x-tooltip:
                      配置 TLS 加密算法套件。如果不配置，则使用默认 TLS 配置。点击<a href='https://help.aliyun.com/document_detail/90763.html'
                      target='_blank'>这里</a>查看更多详情。
                    x-type: array-select
                    x-reactions:
                      dependencies:
                        - ".minVersion"
                      fulfill:
                        state:
                          visible: "{{!!$deps[0]}}"
                    default:
                      - TLS_RSA_WITH_AES_128_CBC_SHA
                      - TLS_RSA_WITH_AES_256_CBC_SHA
                      - TLS_RSA_WITH_AES_128_GCM_SHA256
                      - TLS_RSA_WITH_AES_256_GCM_SHA384
                      - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
                      - TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
                      - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
                      - TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
                      - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
                      - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
                      - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
                      - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
                      - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305
                      - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305
                      - TLS_RSA_WITH_RC4_128_SHA
                      - TLS_RSA_WITH_3DES_EDE_CBC_SHA
                      - TLS_RSA_WITH_AES_128_CBC_SHA256
                      - TLS_ECDHE_ECDSA_WITH_RC4_128_SHA
                      - TLS_ECDHE_RSA_WITH_RC4_128_SHA
                      - TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
                      - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
                      - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
                    items:
                      oneOf:
                        - type: string
                          enum:
                            - TLS_RSA_WITH_AES_128_CBC_SHA
                            - TLS_RSA_WITH_AES_256_CBC_SHA
                            - TLS_RSA_WITH_AES_128_GCM_SHA256
                            - TLS_RSA_WITH_AES_256_GCM_SHA384
                            - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
                            - TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
                            - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
                            - TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
                            - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
                            - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
                            - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
                            - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
                            - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305
                            - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305
                            - TLS_RSA_WITH_RC4_128_SHA
                            - TLS_RSA_WITH_3DES_EDE_CBC_SHA
                            - TLS_RSA_WITH_AES_128_CBC_SHA256
                            - TLS_ECDHE_ECDSA_WITH_RC4_128_SHA
                            - TLS_ECDHE_RSA_WITH_RC4_128_SHA
                            - TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
                            - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
                            - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
              certConfig:
                title: 证书配置
                type: object
                required:
                  - certName
                  - certificate
                  - privateKey
                properties:
                  certName:
                    "$ref": "#/definitions/namePattern"
                  certificate:
                    title: 证书
                    description:
                      表示证书，内容仅支持 PEM 格式，点击<a href='https://docs.serverless-devs.com/fc/yaml/customDomains#certconfig'
                      target='_blank'>这里</a>查看更多详情。
                    type: string
                    minLength: 1
                  privateKey:
                    title: 私钥
                    description:
                      表示私钥，内容仅支持 PEM 格式，点击<a href='https://docs.serverless-devs.com/fc/yaml/customDomains#certconfig'
                      target='_blank'>这里</a>查看更多详情。
                    type: string
                    minLength: 1
