---
title: æœ¬åœ°è°ƒç”¨ local
description: 'æœ¬åœ°è°ƒç”¨ local'
position: 1
category: 'è°ƒç”¨&è°ƒè¯•'
---

# Local å‘½ä»¤

`local` å‘½ä»¤æ˜¯åœ¨æœ¬åœ°å¯¹å‡½æ•°è°ƒè¯•çš„å‘½ä»¤ã€‚

- [Local å‘½ä»¤](#local-å‘½ä»¤)
  - [å‘½ä»¤è§£æ](#å‘½ä»¤è§£æ)
  - [local invoke å‘½ä»¤](#local-invoke-å‘½ä»¤)
    - [å‚æ•°è§£æ](#å‚æ•°è§£æ)
    - [æ“ä½œæ¡ˆä¾‹](#æ“ä½œæ¡ˆä¾‹)
  - [local start å‘½ä»¤](#local-start-å‘½ä»¤)
    - [å‚æ•°è§£æ](#å‚æ•°è§£æ-1)
    - [æ“ä½œæ¡ˆä¾‹](#æ“ä½œæ¡ˆä¾‹-1)
    - [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
  - [è°ƒç”¨æ—¶æ¨¡æ‹Ÿ NAS ç›®å½•](#è°ƒç”¨æ—¶æ¨¡æ‹Ÿ-nas-ç›®å½•)
  - [æ–­ç‚¹è°ƒè¯•](#æ–­ç‚¹è°ƒè¯•)
    - [VSCode](#vscode)
      - [è°ƒè¯• Event å‡½æ•°](#è°ƒè¯•-event-å‡½æ•°)
        - [step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤](#step1æ‰“å¼€ç»ˆç«¯è¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹è¾“å…¥å¯åŠ¨æŒ‡ä»¤)
        - [step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨](#step2å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨)
        - [æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘](#æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘)
      - [è°ƒè¯• HTTP å‡½æ•°](#è°ƒè¯•-http-å‡½æ•°)
        - [step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤](#step1æ‰“å¼€ç»ˆç«¯è¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹è¾“å…¥å¯åŠ¨æŒ‡ä»¤-1)
        - [step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨](#step2å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨-1)
        - [step3ï¼šå¼€å§‹æ–­ç‚¹è°ƒè¯•](#step3å¼€å§‹æ–­ç‚¹è°ƒè¯•)
        - [step4ï¼šç»“æŸæ–­ç‚¹è°ƒè¯•](#step4ç»“æŸæ–­ç‚¹è°ƒè¯•)
        - [æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘](#æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘-1)
    - [Intellij](#intellij)
        - [step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤](#step1æ‰“å¼€ç»ˆç«¯è¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹è¾“å…¥å¯åŠ¨æŒ‡ä»¤-2)
        - [step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨](#step2å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨-2)
        - [æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘](#æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘-2)
    - [Pycharm](#pycharm)
        - [step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤](#step1æ‰“å¼€ç»ˆç«¯è¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹è¾“å…¥å¯åŠ¨æŒ‡ä»¤-3)
        - [step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨](#step2å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨-3)
        - [step3ï¼šå¼€å§‹æ–­ç‚¹è°ƒè¯•](#step3å¼€å§‹æ–­ç‚¹è°ƒè¯•-1)
        - [step4ï¼šç»“æŸæ–­ç‚¹è°ƒè¯•](#step4ç»“æŸæ–­ç‚¹è°ƒè¯•-1)
        - [æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘](#æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘-3)
  - [é™„å½•](#é™„å½•)
    - [é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°](#é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°)

> âš ï¸ æ³¨æ„ï¼šè¯¥å‘½ä»¤å¯¹ Docker æœ‰æ‰€ä¾èµ–ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨è¯¥å‘½ä»¤æ—¶ï¼Œéœ€è¦å…ˆè¿›è¡Œ [Docker å®‰è£…](https://docs.docker.com/get-started/#download-and-install-docker) ã€‚


## å‘½ä»¤è§£æ

å½“æ‰§è¡Œå‘½ä»¤`local -h`/`local --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

åœ¨è¯¥å‘½ä»¤ä¸­ï¼ŒåŒ…æ‹¬äº†ä¸¤ä¸ªä¸ªå­å‘½ä»¤ï¼š

- [invokeï¼šæœ¬åœ°è°ƒè¯•äº‹ä»¶å‡½æ•°](#local-invoke-å‘½ä»¤)
- [startï¼šæœ¬åœ°è°ƒè¯•HTTPå‡½æ•°](#local-start-å‘½ä»¤)

## local invoke å‘½ä»¤

`local invoke` å‘½ä»¤ï¼Œæ˜¯è¿›è¡Œæœ¬åœ°äº‹ä»¶å‡½æ•°è°ƒè¯•çš„å‘½ä»¤ã€‚

> ğŸ’¡ äº‹ä»¶å‡½æ•°æŒ‡çš„æ˜¯é HTTP è§¦å‘å™¨çš„å‡½æ•°ï¼ŒåŒ…æ‹¬ä¸é™äº OSS è§¦å‘å™¨å‡½æ•°ã€CDN è§¦å‘å™¨å‡½æ•°ã€Tablestore è§¦å‘å™¨å‡½æ•°ç­‰ã€‚

å½“æ‰§è¡Œå‘½ä»¤`local invoke -h`/`local invoke --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

### å‚æ•°è§£æ

| å‚æ•°å…¨ç§°      | å‚æ•°ç¼©å†™ | Yamlæ¨¡å¼ä¸‹å¿…å¡« | å‚æ•°å«ä¹‰                                                     |
| ------------- | -------- | -------------- | ------------------------------------------------------------ |
| event         | e        | é€‰å¡«           |ä¼ å…¥ `event` å‡½æ•°çš„ `event` äº‹ä»¶æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ `s cli fc-event` æŒ‡ä»¤å¿«é€Ÿè·å–äº‹ä»¶æ•°æ®ç¤ºä¾‹ï¼Œè¯¦ç»†æ“ä½œå‚è€ƒ[è¿™é‡Œ](https://github.com/devsapp/fc/blob/main/docs/zh/command/invoke.md#æ³¨æ„äº‹é¡¹)|
| event-file    | f        | é€‰å¡«           |ä»¥æ–‡ä»¶å½¢å¼ä¼ å…¥ `event` äº‹ä»¶æ•°æ®|
| event-stdin   | s        | é€‰å¡«           |ä»¥æ ‡å‡†è¾“å…¥å½¢å¼ä¼ å…¥ `event` äº‹ä»¶æ•°æ®|
| mode          | m        | é€‰å¡«           |è°ƒè¯•æ¨¡å¼é€‰æ‹©ï¼ŒåŒ…æ‹¬ï¼š<br> - `normal`: é»˜è®¤æ¨¡å¼ï¼Œæœ¬åœ°å‡½æ•°è¿è¡Œå®¹å™¨åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåç«‹åˆ»é€€å‡º<br>`server`: æœ¬åœ°å‡½æ•°è¿è¡Œå®¹å™¨ä¸€ç›´å­˜åœ¨ï¼Œç”¨æˆ·åœ¨å…¶ä»–ç»ˆç«¯å‘èµ·çš„æœ¬åœ°è°ƒç”¨ä¼šå¤ç”¨è¯¥å®¹å™¨<br>`api`: æ”¯æŒé€šè¿‡ sdk è°ƒç”¨æœ¬åœ°å‡½æ•°|
| config        | c        | é€‰å¡«           |æŒ‡å®šæ–­ç‚¹è°ƒè¯•æ—¶ä½¿ç”¨çš„ IDEï¼Œå–å€¼èŒƒå›´ï¼š`vscode, pycharm, intellij`|
| debug-port    | d        | é€‰å¡«           |æŒ‡å®šæ–­ç‚¹è°ƒè¯•ç«¯å£|
| debug-args    | -        | é€‰å¡«           |æ–­ç‚¹è°ƒè¯•æ—¶ä¼ å…¥çš„å‚æ•°, è¯¦æƒ…è§é™„å½•ä¸­çš„é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°|
| debugger-path | q        | é€‰å¡«           |è‡ªå®šä¹‰æ–­ç‚¹è°ƒè¯•å™¨è·¯å¾„ï¼Œä¼šå°†æœ¬åœ°æŒ‡å®šè·¯å¾„æŒ‚è½½åˆ°ç¨‹åºè¿è¡Œç¯å¢ƒçš„ /tmp/debugger_file ä¹‹ä¸­|
| tmp-dir       | -        | é€‰å¡«           |è‡ªå®šä¹‰å‡½æ•°è¿è¡Œç¯å¢ƒä¸­ `/tmp` è·¯å¾„çš„æœ¬æœºæŒ‚è½½è·¯å¾„ï¼Œé»˜è®¤ä¸º `./.s/tmp/invoke/serviceName/functionName`/|
| server-port   | -        | é€‰å¡«           |è‡ªå®šä¹‰æœ¬åœ°ç›‘å¬ `server` çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯åœ¨ 7000 åˆ° 8000 é—´çš„éšæœºç«¯å£|

> å½“å‰å‘½ä»¤è¿˜æ”¯æŒéƒ¨åˆ†å…¨å±€å‚æ•°ï¼ˆä¾‹å¦‚`-a/--access`, `--debug`, `--help`ç­‰ï¼‰ï¼Œè¯¦æƒ…å¯å‚è€ƒ [Serverless Devs å…¨å±€å‚æ•°æ–‡æ¡£](https://github.com/Serverless-Devs/Serverless-Devs/blob/master/docs/zh/command/readme.md#%E5%85%A8%E5%B1%80%E5%8F%82%E6%95%B0)

### æ“ä½œæ¡ˆä¾‹

**æœ‰èµ„æºæè¿°æ–‡ä»¶ï¼ˆYamlï¼‰æ—¶**ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ`s local invoke `è¿›è¡Œæœ¬åœ°è°ƒè¯•ï¼Œå®Œæˆçš„è¾“å‡ºç¤ºä¾‹ï¼š

```
FC Invoke Start RequestId: 0ba8ac3f-abf8-46d4-b61f-8e0f9f265d6a
2021-11-11T05:45:58.027Z 0ba8ac3f-abf8-46d4-b61f-8e0f9f265d6a [INFO] hello world
FC Invoke End RequestId: 0ba8ac3f-abf8-46d4-b61f-8e0f9f265d6a
hello world

RequestId: 0ba8ac3f-abf8-46d4-b61f-8e0f9f265d6a 	 Billed Duration: 146 ms 	 Memory Size: 128 MB 	 Max Memory Used: 23 MB
```

## local start å‘½ä»¤

`local start` å‘½ä»¤ï¼Œæ˜¯è¿›è¡Œæœ¬åœ° HTTP å‡½æ•°è°ƒè¯•çš„å‘½ä»¤ã€‚

å½“æ‰§è¡Œå‘½ä»¤`local start -h`/`local start --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

### å‚æ•°è§£æ

| å‚æ•°å…¨ç§°      | å‚æ•°ç¼©å†™ | Yamlæ¨¡å¼ä¸‹å¿…å¡« | å‚æ•°å«ä¹‰                                                     |
| ------------- | -------- | -------------- | ------------------------------------------------------------ |
| config        | c        | é€‰å¡«           | æŒ‡å®šæ–­ç‚¹è°ƒè¯•æ—¶ä½¿ç”¨çš„ IDEï¼Œå¯é€‰ï¼š`vscode, pycharm, intellij` |
| debug-port    | d        | é€‰å¡«           | æŒ‡å®šæ–­ç‚¹è°ƒè¯•ç«¯å£ |
| custom-domain | -        | é€‰å¡«           | ä»¥è‡ªå®šä¹‰åŸŸåä½œä¸º HTTP Server çš„è®¿é—® url |
| debug-args    | -        | é€‰å¡«           | æ–­ç‚¹è°ƒè¯•æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œè¯¦æƒ…è§é™„å½•ä¸­çš„é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•° |
| debugger-path | -        | é€‰å¡«           | è‡ªå®šä¹‰æ–­ç‚¹è°ƒè¯•å™¨è·¯å¾„ï¼Œä¼šå°†æœ¬åœ°æŒ‡å®šè·¯å¾„æŒ‚è½½åˆ°ç¨‹åºè¿è¡Œç¯å¢ƒçš„ /tmp/debugger_file ä¹‹ä¸­ |
| tmp-dir       | -        | é€‰å¡«           | è‡ªå®šä¹‰å‡½æ•°è¿è¡Œç¯å¢ƒä¸­ `/tmp` è·¯å¾„çš„æœ¬æœºæŒ‚è½½è·¯å¾„ï¼Œé»˜è®¤ä¸º `./.s/tmp/invoke/serviceName/functionName/` |
| server-port   | -        | é€‰å¡«           | è‡ªå®šä¹‰æœ¬åœ°ç›‘å¬ HTTP Server çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯åœ¨ 7000 åˆ° 8000 é—´çš„éšæœºç«¯å£ |

> å½“å‰å‘½ä»¤è¿˜æ”¯æŒéƒ¨åˆ†å…¨å±€å‚æ•°ï¼ˆä¾‹å¦‚`-a/--access`, `--debug`, `--help`ç­‰ï¼‰ï¼Œè¯¦æƒ…å¯å‚è€ƒ [Serverless Devs å…¨å±€å‚æ•°æ–‡æ¡£](https://github.com/Serverless-Devs/Serverless-Devs/blob/master/docs/zh/command/readme.md#%E5%85%A8%E5%B1%80%E5%8F%82%E6%95%B0)

### æ“ä½œæ¡ˆä¾‹

**æœ‰èµ„æºæè¿°æ–‡ä»¶ï¼ˆYamlï¼‰æ—¶**ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ`s local start `è¿›è¡Œèµ„æºéƒ¨ç½²ï¼Œéƒ¨ç½²å®Œæˆçš„è¾“å‡ºç¤ºä¾‹ï¼š

```text
 	url: http://localhost:7665/2016-08-15/proxy/fc-deploy-service/http-trigger-py36/
	methods: GET
	authType: anonymous

    Tips for more action:
        Start with customDomain method: [s local start auto]
        Debug with customDomain method: [s local start -d 3000 auto]
```

æ­¤æ—¶ï¼Œå¯ä»¥æ ¹æ®å‘½ä»¤è¡Œæç¤ºçš„`url`ä¿¡æ¯ï¼Œåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ HTTP å‡½æ•°æœ¬åœ°è°ƒè¯•çš„å…·ä½“å†…å®¹ã€‚

å¦‚æœéœ€è¦é€šè¿‡è‡ªå®šä¹‰åŸŸåçš„æ–¹å¼è°ƒè¯• HTTP å‡½æ•°ï¼Œåˆ™å¯ä»¥åœ¨è°ƒè¯•æ—¶å¢åŠ `--custom`å‚æ•°ï¼Œè¾“å‡ºç¤ºä¾‹ï¼š

```
  url: http://localhost:7308/
	methods: GET
	authType: anonymous
```

> å…³äºè‡ªå®šä¹‰åŸŸåè°ƒè¯•æ¨¡å¼ä»¥åŠé»˜è®¤çš„è°ƒè¯•æ¨¡å¼åŒºåˆ«ï¼šåœ¨ä½¿ç”¨å‡½æ•°è®¡ç®—çš„ HTTP å‡½æ•°æ—¶ï¼Œæ˜¯æœ‰ä¸¤ä¸ªåŸŸåç»„æˆï¼š
>
> - ç³»ç»ŸåŸŸååœ°å€ï¼Œä¾‹å¦‚`http://localhost:7665/2016-08-15/proxy/fc-deploy-service/http-trigger-py36/`
> - è‡ªå®šä¹‰åŸŸååœ°å€ï¼Œä¾‹å¦‚`http://abc.com`/
>
> è¿™ä¸¤ä¸ªåœ°å€åœ¨é custom runtime å‡½æ•°ä¸­æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œè€Œå¯¹äº custom-runtime/custom-container å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªåœ°å€çš„æ ¸å¿ƒåŒºåˆ«æ˜¯å…¶`path`ä¸åŒï¼Œä¾‹å¦‚ä»¥ä¼ ç»Ÿçš„ Web æ¡†æ¶ä¸ºä¾‹ï¼š
>
> - ç³»ç»ŸåŸŸååœ°å€çš„åŸºç¡€è·¯å¾„åŒ¹é…æ˜¯ï¼š`/2016-08-15/proxy/fc-deploy-service/http-trigger-py36/`
> - è‡ªå®šä¹‰åŸŸååœ°å€çš„åŸºç¡€è·¯å¾„åŒ¹é…å¯ä»¥æ˜¯ä»»ä½•å½¢å¼ï¼ŒåŒ…æ‹¬`/`
>
> ç”±äºè·¯å¾„çš„ä¸åŒï¼Œæ‰€ä»¥åœ¨ä»£ç å¼€å‘å’Œå¤„ç†çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œå¦‚æœä½¿ç”¨æŸä¸ª Web æ¡†æ¶ï¼ˆä¾‹å¦‚ Expressã€Django ç­‰ï¼‰ï¼ŒåŒ¹é…çš„é¦–é¡µåœ°å€ä¸º`/`ï¼Œé‚£ä¹ˆä½¿ç”¨ç³»ç»ŸåŸŸååœ°å€åˆ™å¯èƒ½ä¼šå‡ºç°`404`ï¼Œè¿™ä¸ªæ—¶å€™è¾ƒä¸ºæ¨èä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œè·å¾—æ›´åŸç”Ÿçš„ä½“éªŒã€‚æ‰€ä»¥ä¸ºäº†æ»¡è¶³å¼€å‘è€…åœ¨ç³»ç»ŸåŸŸåä¸è‡ªå®šä¹‰åŸŸåä¸åŒæ¨¡å¼ä¸‹çš„è°ƒè¯•éœ€è¦ï¼Œæœ¬ç»„ä»¶æ”¯æŒ`--custom-domain`å‚æ•°è¿›è¡Œè‡ªå®šä¹‰åŸŸåæ¨¡å¼è°ƒè¯•ã€‚
> å¦‚æœæ—¢è¦ä½¿ç”¨ custom-runtime/custom-container å‡½æ•°ï¼Œåˆè¦ä½¿ç”¨ç³»ç»ŸåŸŸåï¼Œè¿˜è¦ä¸å¤„ç†ç³»ç»ŸåŸºç¡€è·¯å¾„ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å‘ç»™å‡½æ•°çš„ HTTP è¯·æ±‚ä¸­å¢åŠ  header: `x-fc-invocation-target: 2016-08-15/proxy/$ServiceName/$functionName` å³å¯

### æ³¨æ„äº‹é¡¹

é’ˆå¯¹ s local start æœ¬åœ°è°ƒç”¨äº¤äº’è®¾è®¡ï¼š

- å¦‚æœä¸å­˜åœ¨ customDomains é…ç½®ï¼Œä¸€å®šä½¿ç”¨ç³»ç»ŸåŸŸåè·¯å¾„ï¼š`/2016-08-15/proxy/serviceName/functionName/`
- å­˜åœ¨ customDomains é…ç½®
  1. æŒ‡å®š --custom-domain å‚æ•°, ä½¿ç”¨æŒ‡å®šåŸŸåé…ç½®çš„è·¯å¾„
  2. æœªæŒ‡å®š --custom-domain
    2.1 å¦‚æœ customDomains ä»…æœ‰ä¸€ä¸ªï¼Œç›´æ¥ä½¿ç”¨æ­¤åŸŸåé…ç½®çš„è·¯å¾„
    2.2 å¦‚æœå­˜åœ¨å¤šä¸ªåˆ™äº§ç”Ÿ`äº¤äº’`ï¼Œé€‰æ‹©é…ç½®çš„åŸŸåè·¯å¾„
  > å¦‚æœä½¿ç”¨ç³»ç»ŸåŸŸåè·¯å¾„ï¼Œä½¿ç”¨ --custom-domain system æˆ–è€…é€‰æ‹©æ—¶å€™é€‰æ‹© system

## è°ƒç”¨æ—¶æ¨¡æ‹Ÿ NAS ç›®å½•

å½“yamlä¸­é…ç½®äº†nasConfigæ—¶ï¼Œlocal å¯ä»¥æ¨¡æ‹Ÿ nas çš„ç›®å½•ç»“æ„ï¼Œä¾‹å¦‚ï¼š

`s.yaml` é…ç½®å¦‚ä¸‹

````yaml
services:
  helloworld:
    component:  fc
    props:
      region: cn-hangzhou
      service:
        name: hello-world-service
        description: 'hello world by serverless devs'
        vpcConfig: auto
        nasConfig:
          userId: 10003
          groupId: 10003
          mountPoints:
            - serverAddr: xxx.cn-hangzhou.nas.aliyuncs.com
              nasDir: /hello-world-service
              fcDir: /mnt/auto
      function:
        name: event-py3
        description: 'hello world by serverless devs'
        runtime: python3
        codeUri: ./code
        handler: index.handler
        memorySize: 128
        timeout: 60
````

`code/index.py` å†…å®¹å¦‚ä¸‹

```python
# coding=utf-8
import logging
import os

def handler(event, context):
  logger = logging.getLogger()
  logger.info('============')
  os.system("ls /mnt/auto")
  logger.info('============')
  return 'hello world\n'
```

`s.yaml` åŒç›®å½•çº§åˆ« `.s/nas/auto-default/hello-world-service` çš„ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸º `test.ts` çš„æ–‡ä»¶ï¼Œç›®å½•ç»“æ„åŠæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
<img src="https://img.alicdn.com/imgextra/i4/O1CN01NqMcAX1h6vhheEDlz_!!6000000004229-2-tps-2494-1536.png"/>

## æ–­ç‚¹è°ƒè¯•
### VSCode
ä½¿ç”¨ VSCode è¿›è¡Œæ–­ç‚¹è°ƒè¯•æ—¶ï¼Œæµç¨‹ååˆ†ç®€å•ã€‚

#### è°ƒè¯• Event å‡½æ•°
##### step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤

```
$ s local invoke --config vscode --debug-port 3000
```

å¯åŠ¨æŒ‡ä»¤æ‰§è¡Œåï¼Œæœ¬åœ°çš„å‡½æ•°è®¡ç®—æ‰§è¡Œå®¹å™¨ä¼šæœ‰ä¸€å®šé˜»å¡ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…è°ƒç”¨ï¼›ä¸æ­¤åŒæ—¶å½“å‰é¡¹ç›®ä¼šè‡ªåŠ¨ç”Ÿæˆ .vscode/launch.json æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯åŸºäº VSCode è¿›è¡Œè°ƒè¯•çš„é…ç½®æ–‡ä»¶ï¼Œè‹¥è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆå¯åŠ¨æŒ‡ä»¤ä¼šæ‰“å°ç›¸åº”é…ç½®æ–‡æœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéœ€è¦åˆ©ç”¨è¿™éƒ¨åˆ†å†…å®¹è¦†ç›–å·²æœ‰ .vscode/launch.json ä¸­çš„å†…å®¹ã€‚
![](https://img.alicdn.com/imgextra/i3/O1CN01DcU4ca1VBiSYwrFh4_!!6000000002615-2-tps-1142-387.png)

##### step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨
æ‰“å¼€ VSCode ç•Œé¢ï¼Œç„¶åæ‰“å¼€ s.yml ä¸­ codeUri æ‰€å­˜æ”¾çš„æºä»£ç ï¼Œä¸ºå…¶æ‰“ä¸Šæ–­ç‚¹ï¼Œæ¥ç€ç‚¹å‡»å¼€å§‹è°ƒè¯•æŒ‰é’®ï¼Œå…·ä½“æ‰§è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
![](https://img.alicdn.com/imgextra/i3/O1CN01yycXnv1vzLO4cB9pv_!!6000000006243-2-tps-750-410.png)

å¯åŠ¨è°ƒè¯•å™¨åï¼Œç¨‹åºä¾¿å·²ç»å¯åŠ¨ï¼Œæ­¤æ—¶å°±å¯ä»¥å¼€å§‹è¿›è¡Œæˆ‘ä»¬çš„æ–­ç‚¹è°ƒè¯•å·¥ä½œäº†ã€‚

##### æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘

- Event å‡½æ•°

  [![Watch the video](https://img.alicdn.com/imgextra/i4/O1CN01ejBHk91EveiZyOm7j_!!6000000000414-2-tps-661-369.png)](https://images.devsapp.cn/s-tool/zh/debug/VScode-%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95Event%E5%87%BD%E6%95%B0.mp4)

- php7.2 event å‡½æ•°
php7.2 runtime çš„æœ¬åœ°è°ƒè¯• IDE å»ºè®®ä½¿ç”¨ VSCodeï¼Œå…¶æ–­ç‚¹è°ƒè¯•æ­¥éª¤ä¸å…¶ä»–è¯­è¨€æœ‰ä¸€å®šå·®å¼‚æ€§ï¼Œå› æ­¤å•ç‹¬è¿›è¡Œä»‹ç»

  [![Watch the video](https://img.alicdn.com/imgextra/i3/O1CN010wEPmM1rFlVc9UIb6_!!6000000005602-2-tps-673-376.png)](https://images.devsapp.cn/s-tool/zh/debug/VSCode-%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95php7.2event%E5%87%BD%E6%95%B0.mp4)

#### è°ƒè¯• HTTP å‡½æ•°
##### step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤

```
$ s local start --config vscode --debug-port 3000
```
å¯åŠ¨æŒ‡ä»¤æ‰§è¡Œåï¼Œæœ¬åœ°çš„å‡½æ•°è®¡ç®—æ‰§è¡Œå®¹å™¨ä¼šé˜»å¡ç­‰å¾…è°ƒç”¨ï¼Œå¹¶æ‰“å°è®¿é—® http å‡½æ•°çš„ url å­—æ®µã€‚

##### step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨
æ‰“å¼€ VSCode ç•Œé¢ï¼Œç„¶åæ‰“å¼€ s.yml ä¸­ codeUri å­˜æ”¾çš„æºä»£ç ï¼Œä¸ºå…¶æ‰“ä¸Šæ–­ç‚¹ï¼Œæ¥ç€ç‚¹å‡»å¼€å§‹è°ƒè¯•æŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚æ­¤æ—¶åœ¨å¯åŠ¨æŒ‡ä»¤ç»ˆç«¯é¡µé¢ï¼Œä¼šå‡ºç° "Debugger attached." å­—æ®µï¼Œè¯´æ˜è°ƒè¯•å™¨å¯åŠ¨æˆåŠŸï¼Œç­‰å¾…è¢«è°ƒç”¨ã€‚
![](https://img.alicdn.com/imgextra/i1/O1CN01qE10mn1T09Dv5aCO3_!!6000000002319-2-tps-793-453.png)

##### step3ï¼šå¼€å§‹æ–­ç‚¹è°ƒè¯•
å¯ä»¥é€šè¿‡ curl æŒ‡ä»¤ã€æµè§ˆå™¨ç­‰æ–¹å¼è®¿é—® Http å‡½æ•°çš„ URLï¼Œæ­¤æ—¶ç¨‹åºå¯åŠ¨ï¼Œæ–­ç‚¹è°ƒè¯•å¼€å§‹ã€‚

##### step4ï¼šç»“æŸæ–­ç‚¹è°ƒè¯•
è°ƒè¯•å®Œæˆåï¼Œä¸»åŠ¨å…³é—­æ–­ç‚¹è°ƒè¯•å™¨ï¼Œç„¶ååœ¨å¯åŠ¨æŒ‡ä»¤ç»ˆç«¯é¡µé¢ï¼Œæ‰§è¡Œ Ctrl+C å³å¯é€€å‡ºè°ƒè¯•è¿›ç¨‹ã€‚

##### æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘
- Http å‡½æ•°

  [![Watch the video](https://img.alicdn.com/imgextra/i2/O1CN01MpMnk31IJQ7I1uh9D_!!6000000000872-2-tps-671-375.png)](https://images.devsapp.cn/s-tool/zh/debug/VSCode%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95HTTP%E5%87%BD%E6%95%B0.mp4)

- php7.2 Http å‡½æ•°

  [![Watch the video](https://img.alicdn.com/imgextra/i3/O1CN01JIBhfd1kuLHglnrlj_!!6000000004743-2-tps-674-375.png)](https://images.devsapp.cn/s-tool/zh/debug/VSCode%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95php7.2http%E5%87%BD%E6%95%B0.mp4)

### Intellij

åŸºäº Intellij è¿›è¡Œæ–­ç‚¹è°ƒè¯•æ—¶ï¼Œé’ˆå¯¹ä¸åŒè¯­è¨€éœ€è¦æ‰‹åŠ¨åœ¨ IDE ä¸­é…ç½®ç›¸åº”åœ°æ–­ç‚¹è°ƒè¯•å™¨ï¼Œç”±äºä½¿ç”¨ Intellij å¼€å‘æœ€å¤šçš„è¯­è¨€æ˜¯ Javaï¼ŒåŒæ—¶æ›´æ¢ IDE åï¼Œå”¯ä¸€ä¸åŒçš„æ­¥éª¤åªæœ‰â€œå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨â€ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»¥æœ¬åœ°è°ƒè¯• Java Event å‡½æ•°ä¸ºä¾‹ï¼Œå¯¹â€œå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨â€æ­¥éª¤è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚

##### step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤

ç”±äº Java æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œå› æ­¤åœ¨å¼€å§‹å‰éœ€è¦å¯¹ç¨‹åºè¿›è¡Œæ‰“åŒ…ï¼Œæœ¬æ–‡ç¤ºä¾‹ä¼šä½¿ç”¨ mvn package å¯¹å‡½æ•°æ‰“åŒ…

```
$ mvn package
$ s local invoke --config intellij --debug-port 3000
```

##### step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨
- æ‰“å¼€ `Intellij` ç•Œé¢ï¼Œåœ¨èœå•æ ä¾æ¬¡é€‰æ‹© `Run -> Edit Configurations`, éšåå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ–°å»ºä¸€ä¸ª `Remote JVM Debug`ã€‚
  ![](https://img.alicdn.com/imgextra/i3/O1CN01rauocH1lv5Y3crJOB_!!6000000004880-2-tps-1080-389.png)

- æ¥ç€ï¼Œè‡ªå®šä¹‰è°ƒè¯•å™¨åç§°ï¼Œå¹¶å°†ç«¯å£è®¾ç½®ä¸º 3000ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
  ![](https://img.alicdn.com/imgextra/i4/O1CN01FRAQlP1cXQXeReL4z_!!6000000003610-2-tps-1080-817.png)

- æœ€åï¼Œæ‰“å¼€ s.yml ä¸­ codeUri å­˜æ”¾çš„æºä»£ç ï¼Œä¸ºå…¶æ‰“ä¸Šæ–­ç‚¹ï¼Œæ¥ç€ç‚¹å‡»å¼€å§‹è°ƒè¯•æŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
  ![](https://img.alicdn.com/imgextra/i1/O1CN01uaa9LY1kBSTUS6hdp_!!6000000004645-2-tps-1080-663.png)

##### æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘

[![Watch the video](https://img.alicdn.com/imgextra/i3/O1CN0189GDWP23hxH8tsgdB_!!6000000007288-2-tps-670-375.png)](https://images.devsapp.cn/s-tool/zh/debug/Intellij-%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95event%E5%87%BD%E6%95%B0.mp4)

### Pycharm
Pycharm æ”¯æŒçš„è¿è¡Œæ—¶æœ‰ python2.7 å’Œ python3 ä¸¤ä¸ªç‰ˆæœ¬ã€‚åœ¨ Pycharm ä¸­è¿›è¡Œæ–­ç‚¹è°ƒè¯•æ—¶ï¼Œä¸ä»…éœ€è¦åœ¨ IDE ä¸­é…ç½®æ–­ç‚¹è°ƒè¯•å™¨ï¼Œè¿˜éœ€è¦å¯¹ä½¿ç”¨è€…çš„æºç è¿›è¡Œä¾µå…¥å¼ä¿®æ”¹ï¼Œç”±äºæ“ä½œæ­¥éª¤å†…å®¹ä¸å¸¸è§„å†…å®¹æœ‰æ‰€ä¸åŒï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦è§£ä¸€ä¸‹è¿™éƒ¨åˆ†çš„è°ƒè¯•æ­¥éª¤ã€‚

##### step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤

```
# event å‡½æ•°
$ s local invoke --config pycharm --debug-port 3000

# http å‡½æ•°
$ s local start --config pycharm --debug-port 3000
```

ä¸ä¹‹å‰ä¸åŒçš„æ˜¯ï¼ŒEvent å‡½æ•°å¯åŠ¨æŒ‡ä»¤æ‰§è¡Œå®Œæˆåï¼Œå¹¶ä¸ä¼šå‡ºç°é˜»å¡çš„æƒ…å†µï¼Œè€Œæ˜¯ä¼šç›´æ¥æ‰§è¡ŒæˆåŠŸã€‚æ­¤æ—¶å°±éœ€è¦è®°å½• "Tips for PyCharm remote debug" å†…å®¹ï¼Œå…·ä½“å†…å®¹ç¤ºä¾‹å¦‚å›¾æ‰€ç¤ºï¼Œè®°å½•å®Œæˆåï¼Œå¦‚æœæ˜¯ Http å‡½æ•°ï¼Œåˆ™è¾“å…¥ `Ctrl+C` é€€å‡ºå¯åŠ¨ç¨‹åºã€‚

![](https://img.alicdn.com/imgextra/i4/O1CN01vxayMj1IjWh4a5i2L_!!6000000000929-2-tps-1080-264.png)

##### step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨

å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨ä¸»è¦åŒ…å« IDE æ–­ç‚¹è°ƒè¯•å™¨é…ç½®å’Œæºç æ›´æ–°ä¸¤éƒ¨åˆ†ã€‚

- æ‰“å¼€ pycharm ç•Œé¢ï¼Œåœ¨èœå•æ ä¾æ¬¡é€‰æ‹© `Run -> Edit Configurations`ã€‚
  
- å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæ–°å»ºä¸€ä¸ª `Python Debug Server`ã€‚
![](https://img.alicdn.com/imgextra/i1/O1CN01QlrjAe1pVg2MNLEPp_!!6000000005366-2-tps-1080-391.png)

- è®¾ç½®è‡ªå®šä¹‰è°ƒè¯•å™¨åç§°ï¼Œå¹¶åŸºäºå›¾äº”ä¸­è·å–çš„å†…å®¹é…ç½® IDE host nameã€Port ä»¥åŠ Path mappings è¿™ä¸‰ä¸ªè°ƒè¯•å™¨é…ç½®çš„è¯¦æƒ…ï¼Œå¦‚å›¾ä¸­æ‰€ç¤ºã€‚
![](https://img.alicdn.com/imgextra/i2/O1CN010qBsQo22AgtMCu8NL_!!6000000007080-2-tps-1080-625.png)

- æ‰“å¼€ s.yml ä¸­ codeUri å­˜æ”¾çš„æºä»£ç ï¼Œå°†ä¾‹å›¾ä¸­ï¼ˆTips for PyCharm remote debug å†…å®¹ç¤ºä¾‹ï¼‰çš„ä»£ç å†…å®¹ç²˜è´´åˆ°ä»£ç å¼€å¤´ï¼Œç„¶åæŒ‰éœ€åœ¨æºç æŒ‡å®šä½ç½®æ‰“ä¸Šæ–­ç‚¹ï¼Œæ¥ç€ç‚¹å‡»å¼€å§‹è°ƒè¯•æŒ‰é’®ï¼Œå…·ä½“æ“ä½œå¦‚å›¾ ï¼ˆpycharm å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨ï¼‰æ‰€ç¤ºã€‚
![](https://img.alicdn.com/imgextra/i4/O1CN01ENud231UW2PkcpN8x_!!6000000002524-2-tps-1080-264.png)
![](https://img.alicdn.com/imgextra/i2/O1CN01zRnzCw1LJpJcXBFZN_!!6000000001279-2-tps-1080-676.png)

##### step3ï¼šå¼€å§‹æ–­ç‚¹è°ƒè¯•
æ‰“å¼€ç»ˆç«¯ï¼Œå¹¶è¿›å…¥ç›®æ ‡é¡¹ç›®ï¼Œæ‰§è¡Œå¯åŠ¨æŒ‡ä»¤
> æ­¤æ—¶å¯ä»¥ä¸ç”¨å¸¦ä¸Šæ–­ç‚¹è°ƒè¯•çš„ç›¸å…³å‚æ•°ã€‚

```
# event å‡½æ•°
$ s local invoke

# http å‡½æ•°
$ s local start
```

- Event å‡½æ•°å¯åŠ¨æŒ‡ä»¤æ‰§è¡Œåä¼šç›´æ¥è¿›å…¥æ–­ç‚¹è°ƒè¯•é˜¶æ®µ

- Http å‡½æ•°å¯åŠ¨æŒ‡ä»¤æ‰§è¡Œåï¼Œå¯ä»¥å…ˆé€šè¿‡ curl æŒ‡ä»¤ã€æµè§ˆå™¨ç­‰æ–¹å¼è®¿é—® Http å‡½æ•°çš„ URLï¼Œæ­¤æ—¶ç¨‹åºä¼šå¯åŠ¨ï¼Œæ–­ç‚¹è°ƒè¯•å°±å¼€å§‹äº†ã€‚
  
##### step4ï¼šç»“æŸæ–­ç‚¹è°ƒè¯•
è°ƒè¯•å®Œæˆåï¼Œä¸»åŠ¨å…³é—­æ–­ç‚¹è°ƒè¯•å™¨ï¼Œå¯¹äº Http å‡½æ•°è€Œè¨€ï¼Œåœ¨å¯åŠ¨æŒ‡ä»¤ç»ˆç«¯é¡µé¢ï¼Œéœ€æ‰§è¡Œ `Ctrl+C` æ–¹å¯é€€å‡ºè°ƒè¯•è¿›ç¨‹ã€‚

##### æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘
- Event å‡½æ•°

  [![Watch the video](https://img.alicdn.com/imgextra/i4/O1CN01DSJxlj28W775uuLns_!!6000000007939-2-tps-671-376.png)](https://images.devsapp.cn/s-tool/zh/debug/Pycharm-%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95event%E5%87%BD%E6%95%B0.mp4)

- Http å‡½æ•°

  [![Watch the video](https://img.alicdn.com/imgextra/i2/O1CN011WyGpC1Kyl66oQlkv_!!6000000001233-2-tps-670-375.png)](https://images.devsapp.cn/s-tool/zh/debug/Pycharm-%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95HTTP%E5%87%BD%E6%95%B0.mp4)

## é™„å½•

### é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°

| **Runtime** | **Default Debug Args** |
| --- | --- |
| nodejs 6 | `--debug-brk=${debugPort}` |
| nodejs 8/10/12/14 | `--inspect-brk=0.0.0.0:${debugPort}` |
| python 2.7/3/3.9 | `-m ptvsd --host 0.0.0.0 --port ${debugPort} --wait` |
| java 8 | `-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,quiet=y,address=${debugPort}` |
| java 11 | `-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,quiet=y,address=*:${debugPort}` |
| php7.2 | `remote_enable=1 remote_autostart=1 remote_port=${debugPort} remote_host=${ip.address()}` |
